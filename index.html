<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <title>Game 2D đơn giản</title>
    <style>
        body {
            margin: 0;
            background: #222;
        }
        canvas {
            display: block;
            margin: auto;
            background: #87CEEB;
        }
    </style>
</head>
<body>

<canvas id="game" width="800" height="400"></canvas>

<script>
const canvas = document.getElementById("game");
const ctx = canvas.getContext("2d");

// Nhân vật
const player = {
    x: 100,
    y: 300,
    width: 40,
    height: 40,
    speed: 5,
    velY: 0,
    jumpPower: 12,
    onGround: false
};

// Mặt đất
const ground = {
    x: 0,
    y: 340,
    width: 800,
    height: 60
};

const gravity = 0.6;
const keys = {};

// Bắt phím
document.addEventListener("keydown", e => keys[e.code] = true);
document.addEventListener("keyup", e => keys[e.code] = false);

function update() {
    // Trái phải
    if (keys["ArrowLeft"] || keys["KeyA"]) {
        player.x -= player.speed;
    }
    if (keys["ArrowRight"] || keys["KeyD"]) {
        player.x += player.speed;
    }

    // Nhảy
    if ((keys["Space"] || keys["ArrowUp"]) && player.onGround) {
        player.velY = -player.jumpPower;
        player.onGround = false;
    }

    // Trọng lực
    player.velY += gravity;
    player.y += player.velY;

    // Va chạm đất
    if (
        player.y + player.height >= ground.y &&
        player.x + player.width > ground.x &&
        player.x < ground.x + ground.width
    ) {
        player.y = ground.y - player.height;
        player.velY = 0;
        player.onGround = true;
    }
}

function draw() {
    ctx.clearRect(0, 0, canvas.width, canvas.height);

    // Nhân vật
    ctx.fillStyle = "red";
    ctx.fillRect(player.x, player.y, player.width, player.height);

    // Mặt đất
    ctx.fillStyle = "green";
    ctx.fillRect(ground.x, ground.y, ground.width, ground.height);
}

function gameLoop() {
    update();
    draw();
    requestAnimationFrame(gameLoop);
}

gameLoop();
</script>

</body>
</html>
